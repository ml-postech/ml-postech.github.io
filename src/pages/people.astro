---
import { getCollection } from "astro:content";
import Layout from "../layouts/Layout.astro";
import { Image } from "astro:assets";

const advisors = (await getCollection("advisors")).toSorted((a, b) =>
  a.data.name.localeCompare(b.data.name),
);

const students = (await getCollection("students")).toSorted((a, b) => {
  if (a.data.role !== b.data.role) {
    const courseOrder: Record<string, number> = {
      "Ph.D.": 0,
      "Ph.D./M.S.": 1,
      "M.S.": 2,
    };
    return courseOrder[a.data.role] - courseOrder[b.data.role];
  }
  return a.data.name.localeCompare(b.data.name);
});

const phdOrCombinedStudents = students.filter(
  (student) =>
    student.data.role === "Ph.D." || student.data.role === "Ph.D./M.S.",
);

const mastersStudents = students.filter(
  (student) => student.data.role === "M.S.",
);

const alumni = (await getCollection("alumnis")).toSorted((a, b) => {
  return a.data.name.localeCompare(b.data.name);
});

const officers = (await getCollection("officers")).toSorted((a, b) =>
  a.data.name.localeCompare(b.data.name),
);
---

<Layout>
  <main class:list={[]}>
    <div
      class:list={[
        "px-6 md:px-10",
        "mt-[160px] mb-[80px] md:mb-[128px]",
        "grid grid-cols-1 md:grid-cols-12 gap-4",
      ]}
    >
      <h1
        class:list={[
          "col-span-8",
          "font-serif",
          "text-[60px] md:text-[120px]",
          "font-bold",
          "-mt-8",
        ]}
      >
        People
      </h1>
      <p class:list={["col-span-4", "text-2xl"]}>
        We are a group of <i class:list={["font-serif"]}>passionate</i> researchers
        and students dedicated to advancing the field of <i
          class:list={["font-serif"]}>machine learning.</i
        >
      </p>
    </div>
    <h2
      class:list={[
        "px-6 md:px-10",
        "font-serif",
        "text-4xl",
        "font-bold",
        "mt-20 mb-10",
      ]}
    >
      Advisors
    </h2>
    <ul
      class:list={[
        "max-md:space-y-10",
        "md:grid",
        "grid-cols-2 xl:grid-cols-4",
        "gap-10",
        "px-6 md:px-10",
        "my-10",
      ]}
    >
      {
        advisors.map((item) => (
          <li class:list={["border-t border-black/50"]}>
            <div class:list={["grid", "grid-cols-12", "gap-4", "my-4"]}>
              <Image
                src={item.data.image}
                alt={item.data.name}
                width={512}
                height={512}
                class:list={[
                  "object-cover",
                  "aspect-square",
                  "col-span-3",
                  "rounded-full",
                ]}
              />
              <h3 class:list={["col-span-9", "self-center"]}>
                <span class:list={["font-medium", "text-xl"]}>
                  {item.data.name}
                </span>
                <br />
                <span class:list={["text-gray-700", "text-sm"]}>
                  {item.data.role}
                </span>
              </h3>
            </div>
            <ul class:list={["text-sm", "truncate"]}>
              <li>
                <a
                  class:list={["underline"]}
                  href={`mailto:${item.data.email}`}
                >
                  {item.data.email}
                </a>
              </li>
              <li>
                <a
                  href={item.data.webpage}
                  target="_blank"
                  rel="noopener noreferrer"
                  class:list={["underline"]}
                >
                  {item.data.webpage}
                </a>
              </li>
            </ul>
          </li>
        ))
      }
    </ul>
    <h2
      class:list={[
        "px-6 md:px-10",
        "font-serif",
        "text-4xl",
        "font-bold",
        "mt-20 mb-10",
      ]}
    >
      Ph.D. and Combined Students
    </h2>
    <ul
      class:list={[
        "max-md:space-y-10",
        "md:grid",
        "grid-cols-2 xl:grid-cols-4",
        "gap-10",
        "px-6 md:px-10",
        "my-10",
      ]}
    >
      {
        phdOrCombinedStudents.map((item) => (
          <li class:list={["border-t border-black/50"]}>
            <div class:list={["grid", "grid-cols-12", "gap-4", "my-4"]}>
              <Image
                src={item.data.image}
                alt={item.data.name}
                width={512}
                height={512}
                class:list={[
                  "object-cover",
                  "aspect-square",
                  "col-span-3",
                  "rounded-full",
                ]}
              />
              <h3 class:list={["col-span-9", "self-center"]}>
                <span class:list={["font-medium", "text-xl"]}>
                  {item.data.name}
                </span>
                <br />
                <span class:list={["text-gray-700", "text-sm"]}>
                  {item.data.role} Course, {item.data.enrollmentYear}.
                </span>
              </h3>
            </div>
            <ul class:list={["text-sm", "truncate"]}>
              <li class:list={["mb-2"]}>
                {item.data.areasOfInterest?.join(", ")}
              </li>
              <li>
                <a
                  class:list={["underline"]}
                  href={`mailto:${item.data.email}`}
                >
                  {item.data.email}
                </a>
              </li>
              {item.data.webpage ? (
                <li>
                  <a
                    href={item.data.webpage}
                    target="_blank"
                    rel="noopener noreferrer"
                    class:list={["underline"]}
                  >
                    {item.data.webpage}
                  </a>
                </li>
              ) : (
                <li>
                  <a>{"N/A"}</a>
                </li>
              )}
            </ul>
          </li>
        ))
      }
    </ul>
    <h2
      class:list={[
        "px-6 md:px-10",
        "font-serif",
        "text-4xl",
        "font-bold",
        "mt-20 mb-10",
      ]}
    >
      M.S. Students
    </h2>
    <ul
      class:list={[
        "max-md:space-y-10",
        "md:grid",
        "grid-cols-2 xl:grid-cols-4",
        "gap-10",
        "px-6 md:px-10",
        "my-10",
      ]}
    >
      {
        mastersStudents.map((item) => (
          <li class:list={["border-t border-black/50"]}>
            <div class:list={["grid", "grid-cols-12", "gap-4", "my-4"]}>
              <Image
                src={item.data.image}
                alt={item.data.name}
                width={512}
                height={512}
                class:list={[
                  "object-cover",
                  "aspect-square",
                  "col-span-3",
                  "rounded-full",
                ]}
              />
              <h3 class:list={["col-span-9", "self-center"]}>
                <span class:list={["font-medium", "text-xl"]}>
                  {item.data.name}
                </span>
                <br />
                <span class:list={["text-gray-700", "text-sm"]}>
                  {item.data.role} Course, {item.data.enrollmentYear}.
                </span>
              </h3>
            </div>
            <ul class:list={["text-sm", "truncate"]}>
              <li class:list={["mb-2"]}>
                {item.data.areasOfInterest?.join(", ")}
              </li>
              <li>
                <a
                  class:list={["underline"]}
                  href={`mailto:${item.data.email}`}
                >
                  {item.data.email}
                </a>
              </li>
              {item.data.webpage ? (
                <li>
                  <a
                    href={item.data.webpage}
                    target="_blank"
                    rel="noopener noreferrer"
                    class:list={["underline"]}
                  >
                    {item.data.webpage}
                  </a>
                </li>
              ) : (
                <li>
                  <a>{"N/A"}</a>
                </li>
              )}
            </ul>
          </li>
        ))
      }
    </ul>
    <h2
      class:list={[
        "px-6 md:px-10",
        "font-serif",
        "text-4xl",
        "font-bold",
        "mt-20 mb-10",
      ]}
    >
      Alumni
    </h2>
    <ul
      class:list={[
        "max-md:space-y-10",
        "md:grid",
        "grid-cols-2 xl:grid-cols-4",
        "gap-10",
        "px-6 md:px-10",
        "my-10",
      ]}
    >
      {
        alumni.map((item) => (
          <li class:list={["border-t border-black/50"]}>
            <div class:list={["grid", "grid-cols-12", "gap-4", "my-4"]}>
              <Image
                src={item.data.image}
                alt={item.data.name}
                width={512}
                height={512}
                class:list={[
                  "object-cover",
                  "aspect-square",
                  "col-span-3",
                  "rounded-full",
                ]}
              />
              <h3 class:list={["col-span-9", "self-center"]}>
                <span class:list={["font-medium", "text-xl"]}>
                  {item.data.name}
                </span>
                <br />
                <span class:list={["text-gray-700", "text-sm"]}>
                  {item.data.role}, {item.data.graduationYear}.
                </span>
              </h3>
            </div>
            <ul class:list={["text-sm", "truncate"]}>
              <li>
                <a
                  class:list={["underline"]}
                  href={`mailto:${item.data.email}`}
                >
                  {item.data.email}
                </a>
              </li>
              {item.data.currentPosition ? (
                <li>{item.data.currentPosition}</li>
              ) : (
                <li>N/A</li>
              )}
            </ul>
          </li>
        ))
      }
    </ul>
    <h2
      class:list={[
        "px-6 md:px-10",
        "font-serif",
        "text-4xl",
        "font-bold",
        "mt-20 mb-10",
      ]}
    >
      Officers
    </h2>
    <ul
      class:list={[
        "max-md:space-y-10",
        "md:grid",
        "grid-cols-2 xl:grid-cols-4",
        "gap-10",
        "px-6 md:px-10",
        "my-10",
      ]}
    >
      {
        officers.map((item) => (
          <li class:list={["border-t border-black/50"]}>
            <div class:list={["grid", "grid-cols-12", "gap-4", "my-4"]}>
              <Image
                src={item.data.image}
                alt={item.data.name}
                width={512}
                height={512}
                class:list={[
                  "object-cover",
                  "aspect-square",
                  "col-span-3",
                  "rounded-full",
                ]}
              />
              <h3 class:list={["col-span-9", "self-center"]}>
                <span class:list={["font-medium", "text-xl"]}>
                  {item.data.name}
                </span>
                <br />
                <span class:list={["text-gray-700", "text-sm"]}>
                  {item.data.role}
                </span>
              </h3>
            </div>
            <ul class:list={["text-sm", "truncate"]}>
              <li>
                <a
                  class:list={["underline"]}
                  href={`mailto:${item.data.email}`}
                >
                  {item.data.email}
                </a>
              </li>
              <li>
                <a
                  href={item.data.webpage}
                  target="_blank"
                  rel="noopener noreferrer"
                  class:list={["underline"]}
                >
                  {item.data.webpage}
                </a>
              </li>
            </ul>
          </li>
        ))
      }
    </ul>
  </main>
</Layout>
