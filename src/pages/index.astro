---
import { Image } from "astro:assets";
import { getCollection } from "astro:content";
import Layout from "../layouts/Layout.astro";
import coverImage from "../assets/cover.jpg";

const news = (await getCollection("news"))
  .toSorted((a, b) => {
    return new Date(b.data.date).getTime() - new Date(a.data.date).getTime();
  })
  .slice(0, 8);
---

<Layout>
  <main class:list={["space-y-8", "my-8"]}>
    <div class:list={["mx-4", "md:grid gap-4 grid-cols-2", "mt-8 md:mt-32"]}>
      <h1
        class:list={[
          "max-md:my-4",
          "md:-mx-4",
          "md:-my-8",
          "md:leading-none",
          "text-6xl md:text-[16rem]",
          "font-semibold",
          "overflow-hidden",
        ]}
      >
        <span class:list={["enter-bottom-to-top", "inline-block"]}>M</span><span
          class:list={["enter-bottom-to-top", "inline-block"]}>L</span
        >
      </h1>
      <div class:list={["md:flex", "justify-end", "flex-col"]}>
        <h2 class:list={["md:text-xl", "leading-tight", "mb-2 md:mb-4"]}>
          <span class:list={["overflow-hidden", "inline-block"]}>
            <span class:list={["enter-bottom-to-top", "inline-block"]}
              >Strive to Understand
            </span>
            <i class:list={["enter-bottom-to-top inline-block", "font-serif"]}
              >Human Intelligence
            </i>
          </span>
          <br /><span class:list={["overflow-hidden", "inline-block"]}>
            <span class:list={["enter-bottom-to-top", "inline-block"]}>
              through the
            </span>
            <i
              class:list={["enter-bottom-to-top", "inline-block", "font-serif"]}
              >Computational Lens</i
            >
          </span>
        </h2>
        <p class:list={["text-xs", "text-gray-500"]}>
          Research Building IV 4309/4429, 67 Cheongam-ro, Nam-gu, Pohang-si,
          Republic of Korea
        </p>
        <p class:list={["text-xs", "text-gray-500"]}>
          Pohang University of Science and Technology (POSTECH)
        </p>
      </div>
    </div>
    <Image
      src={coverImage}
      alt="Cover Image"
      class:list={["w-full", "md:h-screen", "object-cover", "object-bottom"]}
    />
    <div class:list={["grid", "grid-cols-12", "gap-4", "mx-4"]}>
      <div class:list={["col-span-12 md:col-span-6"]}>
        <h2 class:list={["border-b", "border-black", "mb-2"]}>Latest News</h2>
        <ul class:list={["list-none", "space-y-1", "text-sm"]}>
          {
            news.map((item) => (
              <li>
                <span>{item.data.title}</span>
              </li>
            ))
          }
          <li>
            <a href="/news" class:list={["underline"]}>...</a>
          </li>
        </ul>
      </div>
      <div class:list={["col-span-6 md:col-span-3"]}>
        <h2 class:list={["border-b", "border-black", "mb-2"]}>About Us</h2>
        <ul class:list={["list-none", "space-y-1", "text-sm"]}>
          <li>
            <a href="/people" class:list={["underline"]}>People</a>
          </li>
          <li>
            <a href="/publications" class:list={["underline"]}>Publications</a>
          </li>
          <li>
            <a href="/research" class:list={["underline"]}>Research</a>
          </li>
          <li>
            <a href="/news" class:list={["underline"]}>News</a>
          </li>
        </ul>
      </div>
      <div class:list={["col-span-6 md:col-span-3"]}>
        <h2 class:list={["border-b", "border-black", "mb-2"]}>Follow Us</h2>
        <ul class:list={["list-none", "space-y-1", "text-sm"]}>
          <li>
            <a
              href="https://github.com/ml-postech"
              target="_blank"
              rel="noopener noreferrer"
              class:list={["underline"]}>GitHub</a
            >
          </li>
        </ul>
      </div>
    </div>
  </main>
</Layout>

<script>
  import { animate } from "motion";

  document
    .querySelectorAll(".enter-bottom-to-top")
    .forEach((element, index) => {
      animate(
        element,
        {
          transform: ["translateY(256px)", "translateY(0px)"],
        },
        {
          duration: 0.25,
          delay: index * 0.05,
          type: "spring",
          stiffness: 64,
          damping: 16,
        }
      );
    });
</script>
